<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Qurani</title>
  <meta name="description" content="Qurani ‚Äî Lecture du Coran en 30 jours">
  <meta name="theme-color" content="#ffffff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Qurani">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ====== LOADING ====== -->
<div id="loading" class="loading">
  <div class="spinner"></div>
</div>

<!-- ====== MAIN APP ====== -->
<div id="app" class="hidden">

  <!-- Header -->
  <header class="header">
    <button class="menu-btn" id="menu-btn" aria-label="Menu">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
        <line x1="3" y1="6" x2="21" y2="6"/>
        <line x1="3" y1="12" x2="21" y2="12"/>
        <line x1="3" y1="18" x2="21" y2="18"/>
      </svg>
    </button>
    <button class="back-btn hidden" id="back-btn" aria-label="Retour">‚Üê Retour</button>
    <span class="header-title" id="header-title">Aujourd'hui : 208 versets √† lire</span>
    <div class="header-actions" id="header-actions">
      <button class="action-btn" id="search-btn" aria-label="Rechercher">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"/>
          <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- Ayah viewer -->
  <div class="ayah-container" id="ayah-container">
    <p class="ayah-ref ayah-ref-clickable" id="ayah-ref" title="Voir les sourates"></p>
    <div class="ayah-scroll" id="ayah-scroll">
      <div class="ayah-scroll-inner">
        <div class="ayah-text size-M" id="ayah-text" dir="rtl"></div>
      </div>
    </div>
    <div class="nav-arrows">
      <button class="nav-btn" id="share-btn" aria-label="Partager">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"/>
          <polyline points="16 6 12 2 8 6"/>
          <line x1="12" y1="2" x2="12" y2="15"/>
        </svg>
      </button>
      <button class="nav-btn" id="prev-btn" aria-label="Verset pr√©c√©dent">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"/>
        </svg>
      </button>
      <button class="nav-btn" id="next-btn" aria-label="Verset suivant">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 6 15 12 9 18"/>
        </svg>
      </button>
      <button class="nav-btn" id="bookmark-btn" aria-label="Signet">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Goal reached -->
  <div class="goal-reached hidden" id="goal-reached">
    <p>Objectif du jour atteint ‚úì</p>
    <button id="continue-btn">Continuer la lecture</button>
  </div>

  <!-- Progress bars -->
  <div class="progress-section">
    <div class="progress-row">
      <div class="progress-labels">
        <span>Versets du jour</span>
        <span id="today-label">0/0</span>
      </div>
      <div class="progress-track">
        <div class="progress-fill-today" id="today-fill" style="width:0%"></div>
      </div>
    </div>
    <div class="progress-row">
      <div class="progress-labels">
        <span>Lecture compl√®te</span>
        <span id="khatma-label">0%</span>
      </div>
      <div class="progress-track">
        <div class="progress-fill-khatma" id="khatma-fill" style="width:0%"></div>
      </div>
    </div>
  </div>
</div>

<!-- ====== MENU OVERLAY ====== -->
<div id="menu-overlay" class="overlay hidden">
  <div class="overlay-header">
    <h2>Menu</h2>
    <button class="close-btn" id="menu-close" aria-label="Fermer">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>
  <div class="overlay-body">
    <nav class="menu-nav">
      <a href="#" class="menu-item" id="menu-settings">R√©glages</a>
      <a href="#" class="menu-item" id="menu-browse">Parcourir les sourates</a>
      <a href="#" class="menu-item" id="menu-stats">Statistiques</a>
      <a href="#" class="menu-item" id="menu-about">√Ä propos</a>
      <a href="#" class="menu-item" id="menu-help">Aide</a>
    </nav>
  </div>
</div>

<!-- ====== SETTINGS OVERLAY ====== -->
<div id="settings-overlay" class="overlay hidden">
  <div class="overlay-header">
    <h2>R√©glages</h2>
    <button class="close-btn" id="settings-close" aria-label="Fermer">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>
  <div class="overlay-body">
    <div class="setting-group">
      <div class="setting-label">Lectures compl√®tes</div>
      <div class="setting-value" id="cycle-count">0</div>
    </div>
    <div class="setting-group">
      <div class="setting-label">Objectif</div>
      <div class="setting-buttons" id="goal-buttons">
        <button class="setting-btn active" data-goal="1">1 lecture / 30 jours</button>
        <button class="setting-btn" data-goal="2">2 lectures / 30 jours</button>
      </div>
    </div>
    <div class="setting-group">
      <div class="setting-label">Apparence</div>
      <div class="setting-buttons" id="theme-buttons">
        <button class="setting-btn" data-theme="auto">Auto</button>
        <button class="setting-btn active" data-theme="light">Jour</button>
        <button class="setting-btn" data-theme="sepia">S√©pia</button>
        <button class="setting-btn" data-theme="dark">Nuit</button>
      </div>
    </div>
    <div class="setting-group">
      <div class="setting-label">Langue</div>
      <div class="setting-buttons" id="lang-buttons">
        <button class="setting-btn active" data-lang="ar">Arabe</button>
        <button class="setting-btn" data-lang="ar-fr">Arabe + Fran√ßais</button>
        <button class="setting-btn" data-lang="fr">Fran√ßais</button>
      </div>
    </div>
    <div class="setting-group">
      <div class="setting-label">Taille du texte</div>
      <div class="setting-buttons" id="size-buttons">
        <button class="setting-btn" data-size="S">Petit</button>
        <button class="setting-btn active" data-size="M">Moyen</button>
        <button class="setting-btn" data-size="L">Grand</button>
      </div>
    </div>
    <div class="setting-group">
      <div class="setting-label">Mode de lecture</div>
      <div class="setting-buttons" id="mode-buttons">
        <button class="setting-btn active" data-mode="minimal">Minimal</button>
        <button class="setting-btn" data-mode="tajwid">Tajwid</button>
      </div>
      <div id="minimal-color-group" class="setting-sub-group">
        <div class="setting-sub-label">Couleurs</div>
        <div class="setting-buttons" id="minimal-color-buttons">
          <button class="setting-btn active" data-minimal-colors="false">Sans couleurs</button>
          <button class="setting-btn" data-minimal-colors="true">Avec couleurs</button>
        </div>
      </div>
      <div id="tajwid-color-group" class="setting-sub-group hidden">
        <div class="setting-sub-label">Couleurs Tajwid</div>
        <div class="setting-buttons" id="tajwid-color-buttons">
          <button class="setting-btn" data-tajwid-colors="true">Avec couleurs</button>
          <button class="setting-btn" data-tajwid-colors="false">Sans couleurs</button>
        </div>
      </div>
      <div class="setting-hint" id="mode-hint">Texte pur ‚Äî voyelles conserv√©es, signes de waqf masqu√©s.</div>
    </div>
    <div class="setting-group">
      <div class="setting-label">Rappels quotidiens</div>
      <div class="reminder-note">Recevez un rappel matin et soir pour ne pas oublier votre lecture, m√™me lorsque l'application est ferm√©e.</div>
      <div class="reminder-times">
        <span class="reminder-time-badge">‚òÄÔ∏è Matin</span>
        <span class="reminder-time-badge">üåô Soir</span>
      </div>
      <button class="reminder-toggle-btn" id="reminder-toggle-btn">Activer les notifications</button>
      <div class="reminder-confirm hidden" id="reminder-confirm">Tu recevras un rappel chaque matin et chaque soir, in cha Allah.</div>
      <div class="reminder-status hidden" id="reminder-status">
        <span class="reminder-status-dot"></span> Notifications actives
      </div>
    </div>
    <button class="reset-btn" id="reset-btn">Tout r√©initialiser</button>
  </div>
</div>

<!-- ====== ABOUT OVERLAY ====== -->
<div id="about-overlay" class="overlay hidden">
  <div class="overlay-header">
    <h2>√Ä propos</h2>
    <button class="close-btn" id="about-close" aria-label="Fermer">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>
  <div class="overlay-body">
    <div class="about-page" style="padding:0;min-height:auto;direction:ltr;">
      <p>Application simple pour lire le Coran en 30 jours, verset par verset, sans distraction.</p>
      <hr class="divider">
      <p class="sub-label">Source du texte</p>
      <p>Texte du Coran (√©criture Uthmani) provenant du projet <span class="highlight">Tanzil.net</span> via l'API <span class="highlight">alquran.cloud</span>.</p>
      <p>Police utilis√©e : <span class="highlight">Amiri</span> ‚Äî police libre (licence OFL).</p>
      <hr class="divider">
      <p class="sub-label">Vie priv√©e</p>
      <p>Aucun suivi. Aucune analyse. Aucun compte. Toutes les donn√©es sont stock√©es localement sur votre appareil uniquement.</p>
    </div>
  </div>
</div>

<!-- ====== SURAH LIST OVERLAY ====== -->
<div id="surah-overlay" class="overlay hidden">
  <div class="overlay-header">
    <h2>Sourates</h2>
    <button class="close-btn" id="surah-close" aria-label="Fermer">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>
  <p class="surah-overlay-note">Choisissez une sourate. ¬´ Lecture libre ¬ª pour consulter sans modifier votre plan, ¬´ Mon plan 30 jours ¬ª pour repositionner votre progression.</p>
  <div class="surah-search-wrap">
    <input type="text" id="surah-search" class="surah-search" placeholder="Rechercher une sourate..." autocomplete="off">
  </div>
  <div class="overlay-body" id="surah-list"></div>
</div>

<!-- ====== BOOKMARKS OVERLAY ====== -->
<div id="bookmarks-overlay" class="overlay hidden">
  <div class="overlay-header">
    <h2>Favoris</h2>
    <button class="close-btn" id="bookmarks-close" aria-label="Fermer">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>
  <div class="overlay-body" id="bookmarks-list">
    <p class="bookmarks-empty" id="bookmarks-empty">Aucun favori pour le moment. Appuyez sur le signet pendant la lecture pour en ajouter.</p>
  </div>
</div>

<!-- ====== STATS OVERLAY ====== -->
<div id="stats-overlay" class="overlay hidden">
  <div class="overlay-header">
    <h2>Statistiques</h2>
    <button class="close-btn" id="stats-close" aria-label="Fermer">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>
  <div class="overlay-body">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value" id="stat-streak">0</div>
        <div class="stat-label">Jours cons√©cutifs</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="stat-total-verses">0</div>
        <div class="stat-label">Versets lus</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="stat-khatmas">0</div>
        <div class="stat-label">Lectures compl√®tes</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="stat-start-date">‚Äî</div>
        <div class="stat-label">D√©but de la lecture</div>
      </div>
    </div>
    <div class="stats-links">
      <a href="#bookmarks" class="stats-link" id="stats-bookmarks-link">Voir mes favoris</a>
    </div>
  </div>
</div>

<!-- ====== SEARCH OVERLAY ====== -->
<div id="search-overlay" class="overlay hidden">
  <div class="overlay-header">
    <h2>Recherche</h2>
    <button class="close-btn" id="search-close" aria-label="Fermer">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>
  <div class="search-input-wrap">
    <input type="text" id="search-input" class="surah-search" placeholder="Rechercher dans le Coran..." autocomplete="off">
  </div>
  <div class="search-hint" id="search-hint">Tapez un mot en arabe ou en fran√ßais pour trouver les versets correspondants.</div>
  <div class="overlay-body" id="search-results"></div>
</div>

<!-- ====== HELP OVERLAY ====== -->
<div id="help-overlay" class="overlay hidden">
  <div class="overlay-header">
    <h2>Aide</h2>
    <button class="close-btn" id="help-close" aria-label="Fermer">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>
  <div class="overlay-body">
    <div class="help-section">
      <div class="help-title">Lire le Coran en 30 jours</div>
      <div class="help-text">L'application divise les 6236 versets du Coran en 30 portions quotidiennes. Chaque jour, le compteur en haut de l'√©cran vous indique combien de versets il vous reste √† lire. Quand vous passez au verset suivant, votre progression avance automatiquement. Une fois l'objectif du jour atteint, un message de f√©licitation appara√Æt, mais vous pouvez continuer √† lire si vous le souhaitez.</div>
    </div>
    <div class="help-section">
      <div class="help-title">Lecture libre</div>
      <div class="help-text">Le bouton ¬´ Lecture libre ¬ª vous permet de consulter n'importe quel verset du Coran sans aucune cons√©quence sur votre plan de 30 jours. Votre progression reste exactement l√† o√π elle √©tait.<br><br>Exemple : vous √™tes au verset 50 de la sourate Al-Baqara dans votre plan. Vous voulez relire un passage de la sourate Ya-Sin. Utilisez ¬´ Lecture libre ¬ª : votre plan restera au verset 50 de Al-Baqara quand vous reviendrez.</div>
    </div>
    <div class="help-section">
      <div class="help-title">Mon plan 30 jours</div>
      <div class="help-text">Le bouton ¬´ Mon plan 30 jours ¬ª repositionne votre progression de lecture √† l'endroit que vous choisissez. Toute la suite de votre plan de 30 jours reprendra √† partir de ce point.<br><br>Quand l'utiliser ? Si vous avez d√©j√† lu une partie du Coran en dehors de l'application (dans un mushaf papier, √† la mosqu√©e, etc.), utilisez ce bouton pour synchroniser l'application avec votre avancement r√©el. Ainsi, l'application ne vous fera pas relire ce que vous avez d√©j√† lu.<br><br>Attention : ce bouton modifie d√©finitivement votre position dans le plan. Utilisez-le uniquement si vous voulez vraiment d√©placer votre progression.</div>
    </div>
    <div class="help-section">
      <div class="help-title">Navigation</div>
      <div class="help-text">Balayez l'√©cran vers la gauche ou appuyez sur la partie droite pour passer au verset suivant. Balayez vers la droite ou appuyez sur la partie gauche pour revenir au verset pr√©c√©dent.</div>
    </div>
    <div class="help-section">
      <div class="help-title">Langue</div>
      <div class="help-text">Dans les R√©glages, choisissez entre trois modes : Arabe seul, Arabe et Fran√ßais, ou Fran√ßais seul. La traduction utilis√©e est celle de Muhammad Hamidullah.</div>
    </div>
    <div class="help-section">
      <div class="help-title">Recherche</div>
      <div class="help-text">La recherche parcourt le texte arabe et la traduction fran√ßaise. Tapez au moins 2 caract√®res. Appuyez sur un r√©sultat pour le lire.</div>
    </div>
    <div class="help-section">
      <div class="help-title">Favoris</div>
      <div class="help-text">Sauvegardez un verset depuis le menu. Retrouvez vos favoris dans les Statistiques.</div>
    </div>
    <div class="help-section">
      <div class="help-title">Partage</div>
      <div class="help-text">Partagez le verset en cours de lecture avec vos proches.</div>
    </div>
    <div class="help-section">
      <div class="help-title">Th√®mes</div>
      <div class="help-text">Quatre modes d'affichage : Auto (suit le syst√®me), Jour, S√©pia et Nuit.</div>
    </div>
  </div>
</div>

<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script src="app.js"></script>
</body>
</html>
